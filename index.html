<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>GridRush - Racing Strategy Game | Ultimate Tic-Tac-Toe with Dice</title>
  <meta name="title" content="GridRush - Racing Strategy Game">
  <meta name="description" content="Race to victory in GridRush! A fast-paced Ultimate Tic-Tac-Toe game with dice mechanics, strategic AI, and NASCAR-themed racing aesthetics. Play in 5 minutes!">
  <meta name="keywords" content="grid rush, gridrush, racing game, strategy game, tic tac toe, ultimate tic tac toe, dice game, board game, AI game, NASCAR game, browser game, online game, free game">
  <meta name="author" content="GrowthScience AI">
  <meta name="robots" content="index, follow">

  <!-- Theme Color -->
  <meta name="theme-color" content="#E10600">
  <meta name="msapplication-TileColor" content="#E10600">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://gridrush.netlify.app/">
  <meta property="og:title" content="GridRush - Racing Strategy Game">
  <meta property="og:description" content="Race to victory in GridRush! Ultimate Tic-Tac-Toe meets NASCAR with dice mechanics and strategic AI. Play in 5 minutes!">
  <meta property="og:image" content="https://gridrush.netlify.app/assets/social-preview.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://gridrush.netlify.app/">
  <meta property="twitter:title" content="GridRush - Racing Strategy Game">
  <meta property="twitter:description" content="Race to victory in GridRush! Ultimate Tic-Tac-Toe meets NASCAR with dice mechanics and strategic AI.">
  <meta property="twitter:image" content="https://gridrush.netlify.app/assets/social-preview.png">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://gridrush.netlify.app/">

  <!-- Preconnect for performance (future CDNs) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">

  <!-- CSS Files -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/theme.css">
  <link rel="stylesheet" href="css/animations.css">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏎️</text></svg>">
</head>
<body>

  <!-- START SCREEN -->
  <div id="start-screen" class="screen">
    <div class="start-wrapper">
      <img src="assets/gridrush-landing.png" alt="GridRush" class="landing-image">
      <div class="start-container">
      <div class="logo">
        <h1>🏁 GRIDRUSH 🏁</h1>
        <p class="tagline">Ultimate Racing Strategy</p>
      </div>

      <div class="menu-buttons">
        <button id="play-ai-btn" class="menu-btn primary">
          🤖 PLAY VS AI
        </button>

        <button id="play-player-btn" class="menu-btn">
          👥 PLAY VS PLAYER
        </button>
      </div>

      <div class="quick-rules">
        <h3>Quick Rules</h3>
        <div class="rules-grid">
          <div class="rule-item">
            <span class="rule-icon">🎲 1-2</span>
            <span class="rule-text">TEE SHOT<br><small>Stay in grid</small></span>
          </div>
          <div class="rule-item">
            <span class="rule-icon">🎲 3-4</span>
            <span class="rule-text">APPROACH<br><small>Move adjacent</small></span>
          </div>
          <div class="rule-item">
            <span class="rule-icon">🎲 5-6</span>
            <span class="rule-text">FINISH<br><small>Jump anywhere</small></span>
          </div>
        </div>
        <p class="rules-summary">Win 3 sub-grids in a row • 5-minute timer • 3 shots per turn</p>
      </div>
      </div>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="game-screen" class="screen" style="display: none;">
    <div class="game-container">

      <!-- Header -->
      <header class="game-header">
        <div class="header-top">
          <h1 class="game-title">GRIDRUSH</h1>
          <div id="timer-display" class="timer">5:00</div>
        </div>
        <div class="header-bottom">
          <div class="position-indicators">
            <div id="position-display" class="position-display">
              <span class="position-label">POSITION:</span>
              <span id="position-value" class="position-value">🏎️ 1ST | 🏁 2ND</span>
            </div>
          </div>
          <div id="score-display" class="score-display">P1: 0 | P2: 0</div>
          <div id="current-player" class="current-player">Player 1</div>
        </div>
      </header>

      <!-- Hint Display -->
      <div id="hint-display" class="hint-display" style="display: none;">
        <div class="hint-icon">💡</div>
        <div class="hint-content">
          <div class="hint-message">Hint message</div>
          <div class="hint-advice">Hint advice</div>
        </div>
      </div>

      <!-- Game Board -->
      <div class="board-wrapper">
        <div id="board-container" class="board-container">
          <!-- Sub-grids generated by JS -->
        </div>
      </div>

      <!-- Racing Flags Status -->
      <div id="racing-flags" class="racing-flags">
        <!-- Flags will be injected here by JavaScript -->
      </div>

      <!-- Controls -->
      <div class="controls-section">
        <div id="status-message" class="status-message">
          Roll the dice to start!
        </div>

        <div class="controls-group">
          <div id="shot-counter" class="shot-counter">Shot 1/3</div>
          <button id="dice-button" class="dice-button">
            🎲 ROLL DICE
          </button>
          <div id="dice-result" class="dice-result">
            <!-- Dice result shown here -->
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- INSTRUCTIONS MODAL -->
  <div id="instructions-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>📖 How to Play GridRush</h2>
        <button id="close-instructions-btn" class="close-btn">&times;</button>
      </div>

      <div class="modal-body">
        <!-- Game Overview -->
        <section class="instructions-section">
          <h3>🎯 Objective</h3>
          <p>Win <strong>3 sub-grids in a row</strong> (horizontally, vertically, or diagonally) on the main 3×3 game board before your opponent does, or have the most sub-grids when the 5-minute timer expires!</p>
        </section>

        <!-- Game Structure -->
        <section class="instructions-section">
          <h3>🏁 Game Structure</h3>
          <p>The game board has <strong>9 sub-grids</strong> arranged in a 3×3 layout. Each sub-grid contains 9 cells (also 3×3). You take turns placing your markers (🏎️ or 🏁) in cells.</p>
        </section>

        <!-- Turn Structure -->
        <section class="instructions-section">
          <h3>🔄 Turn Structure</h3>
          <p>Each turn consists of <strong>3 shots</strong>:</p>
          <ol>
            <li>Roll the dice 🎲</li>
            <li>Place your marker based on the dice result</li>
            <li>Repeat for shots 2 and 3</li>
            <li>Turn switches to your opponent</li>
          </ol>
        </section>

        <!-- Dice Mechanics -->
        <section class="instructions-section">
          <h3>🎲 Dice Mechanics</h3>
          <div class="dice-table">
            <div class="dice-row">
              <div class="dice-cell"><strong>Roll 1-2</strong></div>
              <div class="dice-cell">⛳ <strong>TEE SHOT</strong></div>
              <div class="dice-cell">Stay in the current sub-grid</div>
            </div>
            <div class="dice-row">
              <div class="dice-cell"><strong>Roll 3-4</strong></div>
              <div class="dice-cell">🏁 <strong>APPROACH</strong></div>
              <div class="dice-cell">Move to an adjacent sub-grid (up/down/left/right)</div>
            </div>
            <div class="dice-row">
              <div class="dice-cell"><strong>Roll 5-6</strong></div>
              <div class="dice-cell">🏆 <strong>FINISH</strong></div>
              <div class="dice-cell">Jump to any available sub-grid</div>
            </div>
          </div>
        </section>

        <!-- Winning -->
        <section class="instructions-section">
          <h3>🏆 Winning</h3>
          <p><strong>Win a Sub-Grid:</strong> Get 3 markers in a row (horizontal, vertical, or diagonal) in that sub-grid. Won sub-grids show your car emoji.</p>
          <p><strong>Win the Game:</strong> Get 3 sub-grids in a row on the main board, OR have the most sub-grids when time expires.</p>
        </section>

        <!-- Special Rules -->
        <section class="instructions-section">
          <h3>⚡ Special Rules</h3>
          <ul>
            <li><strong>Next Grid Selection:</strong> The cell position where you place your marker determines which sub-grid your opponent plays next. (Example: place in cell 5 → opponent goes to sub-grid 5)</li>
            <li><strong>Won Grids:</strong> You cannot place markers in already-won sub-grids</li>
            <li><strong>If Next Grid is Won:</strong> Your opponent can choose any grid on their next roll</li>
            <li><strong>Timer:</strong> 5-minute countdown with warnings at 1:00, 0:30, and 0:10</li>
          </ul>
        </section>

        <!-- Strategy Tips -->
        <section class="instructions-section">
          <h3>💡 Strategy Tips</h3>
          <ul>
            <li><strong>Control the Center:</strong> Sub-grid 5 (center) and center cells give you maximum strategic options</li>
            <li><strong>Think Ahead:</strong> Consider where your move will send your opponent</li>
            <li><strong>Block First:</strong> Prevent opponent wins before going for your own</li>
            <li><strong>Watch the Timer:</strong> Don't waste time on perfect moves when you're ahead</li>
            <li><strong>Use Hints:</strong> After 3 moves, the game provides strategic hints to help you improve</li>
          </ul>
        </section>

        <!-- Game Modes -->
        <section class="instructions-section">
          <h3>🎮 Game Modes</h3>
          <p><strong>🤖 Play vs AI:</strong> Challenge a strategic AI opponent with smart blocking and positioning.</p>
          <p><strong>👥 Play vs Player:</strong> Hot-seat local multiplayer - pass the device between turns!</p>
        </section>
      </div>

      <div class="modal-footer">
        <button id="start-playing-btn" class="menu-btn primary">🏎️ Got It - Let's Race!</button>
      </div>
    </div>
  </div>

  <!-- END SCREEN -->
  <div id="end-screen" class="screen" style="display: none;">
    <div class="end-container">
      <div id="end-title" class="end-title">
        🏆 PLAYER 1 WINS! 🏆
      </div>

      <div id="end-message" class="end-message">
        Checkered Flag!
      </div>

      <div id="end-stats" class="end-stats">
        <!-- Stats populated by JS -->
      </div>

      <div class="end-buttons">
        <button id="rematch-btn" class="menu-btn primary">
          🔄 RACE AGAIN
        </button>
        <button id="menu-btn" class="menu-btn">
          🏠 MAIN MENU
        </button>
      </div>
    </div>
  </div>

  <!-- JavaScript Files -->
  <script src="js/game.js"></script>
  <script src="js/dice.js"></script>
  <script src="js/timer.js"></script>
  <script src="js/ai.js"></script>
  <script src="js/hints.js"></script>
  <script src="js/ui.js"></script>

  <!-- Main App -->
  <script>
    // Initialize the game when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      // Create game instances
      const game = new GridRushGame();
      const dice = new DiceController();
      const ai = new GridRushAI(game);
      const hints = new HintSystem(game);

      // Create timer with callbacks
      const timer = new GameTimer(
        (timeRemaining) => {
          // On tick - update UI
          if (ui) {
            ui.updateTimerDisplay();
          }
        },
        () => {
          // On timeout - end game
          game.handleTimeout();
          if (ui) {
            ui.handleGameEnd();
          }
        }
      );

      // Create UI controller
      const ui = new UIController(game, dice, timer, ai, hints);

      // Initialize UI
      ui.init();

      // Make available globally for debugging
      window.game = game;
      window.ui = ui;
      window.dice = dice;
      window.timer = timer;
      window.ai = ai;
      window.hints = hints;

      console.log('🏎️ GridRush initialized! Type "game" in console to inspect game state.');
    });
  </script>

</body>
</html>
